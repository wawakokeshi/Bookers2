<div class = "container px-5 px-sm-0">
 <div class = "row">
  
  <div class = "col-md-12 mt-3">
   <% if @book.errors.any? %>
    <h3><%= @book.errors.count %>errors prohibited this obj from being saved:</h3>
    <ul>
      <% @book.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
    </ul>
   <% end %>
  </div>
  
  <div class = "col-md-3">
  <%= render 'users/info', user: @user %>
  <%= render 'form', book: @book %>
  </div>
 
  <div class = "mt-3 col-md-8 offset-md-1">
  <h2>Books</h2>

  <table class = "table table-hover table-inverse">
   <thead>
   <tr>
    <th></th>
    <th>Title</th>
    <th>Opinion</th>
   </tr>
   </thead>

   <tbody>
    <% @books.each do |book| %>
    <tr>
     <td>
      <%# コメントアウトの部分は、モデルの定義（get_profile_image）がうまく機能しなくなった時のために念のため残し %>
      <%# p book.user %>
      <%# if book.user.profile_image.attached? %>
      <%= link_to image_tag(book.user.get_profile_image(50,50)), user_path(book.user.id) %>
      <%#= image_tag book.user.get_profile_image(50,50) %>
      <%# else %>
      <%#= image_tag 'no_image.jpg' %>
      <%# end %>
    </td>
     <td><%= link_to book.title, book_path(book.id)%></td>
     <td><%= book.body %></td>
    </tr>
    <% end %>
   </tbody>
  </table>
 </div>
</div>